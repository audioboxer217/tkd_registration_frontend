{% extends "base.html" -%}
{% block content -%}
<div class="row">
  <div class="col-md-12 center-block" align="center">
    <h1>Entries</h1>
  </div>
</div>
<div class="row mb-3">
  <div class="col-md-3" align="left">
    <a class="btn {{ button_style }}" href="/export" role="button">Export</a>
  </div>
  <div class="col-md-9" align="right">
    <a class="btn {{ button_style }}" href="/add_entry?reg_type=seminar" role="button">Add Seminar Registrant</a>
    <a class="btn {{ button_style }}" href="/add_entry?reg_type=purchase" role="button">Add Purchase</a>
    <a class="btn {{ button_style }}" href="/logout" role="button">Logout</a>
  </div>
</div>
  <div class="table-responsive">
    <table id="entries" class="display table table-striped table-hover dt-responsive">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Type</th>
          <th>School</th>
          <th>Tickets</th>
          <th>T-Shirts</th>
          <th>Edit</th>
        </tr>
      </thead>
      <tbody>
        {% for e in entries %}
        <tr>
            <td>{{ e.full_name.S }}</td>
            <td>{{ e.email.S }}</td>
            <td>{{ e.phone.S }}</td>
            <td>{{ e.reg_type.S }}</td>
            <td>{% if e.school is defined %}{{ e.school.S }}{% else %}{% endif %}</td>
            <td>{% if e.reg_type.S == 'purchase' %}{{ e.num_tickets.N }}{% else %}1{% endif %}</td>
            <td>
              {%- if e.tshirts is defined -%}
              {%- for size in e.tshirts.M -%}
              {%- if e.tshirts.M[size]['N'] | int > 0 -%}
              {{ size[7:] }}:{{ e.tshirts.M[size]['N'] }}<br \>
              {%- endif -%}
              {%- endfor -%}
              {%- else -%}
              {%- endif -%}
            </td>
            <td><a class="btn {{ button_style }}" href="/edit?pk={{ e.pk.S }}" role="button">Edit</a></td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Type</th>
          <th>School</th>
          <th>Tickets</th>
          <th>T-Shirts</th>
          <th>Edit</th>
        </tr>
      </tfoot>
    </table>
  </div>
{%- endblock content %}